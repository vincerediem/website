{% extends "base.html" %} {% block title %}Backtest Results{% endblock %} {%
block content %}
<h1>Backtesting Results for {{stock_list}}:</h1>
<div class="row">
  <div class="col-lg-12">
    <h2>Graph</h2>
    <img
      src="path_to_your_python_generated_graph.png"
      alt="Graph"
      class="img-fluid"
    />
  </div>
</div>
<div class="row">
  <div class="col-lg-4">
    <h2>Final Metrics:</h2>
    <p>
      {% for key, value in final_metrics.items() %} {% if
      key.endswith('ave_efficiency') %} Average percent gain per trade: %{{
      "%.2f"|format(value*100) }} <br />
      {% elif key.endswith('total_efficiency') %} Total percent gain for {{
      key.split('_')[0] }}: %{{ "%.2f"|format(value*100) }} {% elif
      key.endswith('total_gains_losses') %} Total gains/losses for {{
      key.split('_')[0] }}: ${{ "%.2f"|format(value) }} <br />
      {% elif key.endswith('ave_gains_losses') %} Average gains/losses for {{
      key.split('_')[0] }}: ${{ "%.2f"|format(value) }} <br />
      <br />
      {% elif key.endswith('num_of_trades') %} Number of trades for {{
      key.split('_')[0] }}: {{ value }} <br />

      {% endif %} {% endfor %}
    </p>
    <p></p>
    <p>
      Initial account balance: ${{ final_metrics.initial_balance }} <br />Final
      account balance: ${{ final_metrics.final_balance }} <br />You made: %{{
      "%.4f"|format(final_metrics.profit_percent) }} <br />You made: ${{
      "%.4f"|format(final_metrics.profit_absolute) }}
    </p>
    {% for key, value in final_metrics.items() %} {% if
    key.endswith('final_share_price') %}
    <p>You have shares worth ${{ value }} at end of period</p>
    {% endif %} {% endfor %}

    <h3>Open Positions at end of period:</h3>
    {{ open_df|safe }}
    <br />
  </div>
  <div class="col-lg-8">
    <h2>Trade Specific Metrics:</h2>
    {{ closed_df|safe }}
  </div>
</div>
{% endblock %}
